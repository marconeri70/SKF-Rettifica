<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Checklist 5S • CH 2 Rettifica</title>
<link rel="icon" href="assets/skf-192.png">
<link rel="stylesheet" href="style.css?v=tp3">
</head>
<body>
<header class="topbar">
  <div class="brand"><img src="assets/skf-192.png" alt="SKF"><span>SKF 5S</span></div><h2 style="margin-left:12px;font-size:1.1rem;font-weight:600">CH 2 — Rettifica</h2>
  <div class="tools">
    <a class="btn ghost" href="./">← Indietro</a>
    <button id="btnLock" class="btn ghost" aria-label="Sblocca con PIN">🔒</button>
    <button id="btnTheme" class="btn ghost" aria-label="Cambia tema">🌓 Tema</button>
  </div>
</header>

<main class="container">

<!-- hidden controls required by app.js to avoid early returns -->
<div style="display:none">
  <input id="q" />
  <select id="lineFilter"></select>
  <select id="sectorFilter"></select>
  <button id="btnAll"></button>
  <button id="btnAsm"></button>
</div>

  <section class="dashboard card">
    <div class="kpis">
      <div class="kpi"><div class="kpi-title">Punteggio medio</div><div id="kpiScore" class="kpi-value">0%</div></div>
      <div class="kpi"><div class="kpi-title">Azioni in ritardo</div><div id="kpiLate" class="kpi-value">0</div></div>
    </div>
    <div id="areas"></div>
  </section>
</main>

<template id="tplArea">
  <article class="area card">
    <header class="area-hd">
      <input class="area-line" placeholder="CH n" />
      <div class="score">
        <span class="score-pill s1" data-s="1S"><b>1S</b> <span class="score-1S">0%</span></span>
        <span class="score-pill s2" data-s="2S"><b>2S</b> <span class="score-2S">0%</span></span>
        <span class="score-pill s3" data-s="3S"><b>3S</b> <span class="score-3S">0%</span></span>
        <span class="score-pill s4" data-s="4S"><b>4S</b> <span class="score-4S">0%</span></span>
        <span class="score-pill s5" data-s="5S"><b>5S</b> <span class="score-5S">0%</span></span>
      </div>
      <div class="hd-actions">
        <button class="btn danger delete-area">Elimina</button>
      </div>
    </header>

    <div class="panels">
      <section class="panel" data-s="1S"><h4 class="pill s1">1S — Selezionare</h4><div class="items"></div><div class="panel-actions"><button class="btn add-item">+ Voce</button></div></section>
      <section class="panel" data-s="2S"><h4 class="pill s2">2S — Sistemare</h4><div class="items"></div><div class="panel-actions"><button class="btn add-item">+ Voce</button></div></section>
      <section class="panel" data-s="3S"><h4 class="pill s3">3S — Splendere</h4><div class="items"></div><div class="panel-actions"><button class="btn add-item">+ Voce</button></div></section>
      <section class="panel" data-s="4S"><h4 class="pill s4">4S — Standardizzare</h4><div class="items"></div><div class="panel-actions"><button class="btn add-item">+ Voce</button></div></section>
      <section class="panel" data-s="5S"><h4 class="pill s5">5S — Sostenere</h4><div class="items"></div><div class="panel-actions"><button class="btn add-item">+ Voce</button></div></section>
    </div>
  </article>
</template>

<template id="tplItem">
  <div class="item">
    <div class="item-hd">
      <input class="txt" placeholder="Titolo voce…" />
      <div class="points-dots">
        <button class="dot" data-val="0">0</button>
        <button class="dot" data-val="1">1</button>
        <button class="dot" data-val="3">3</button>
        <button class="dot" data-val="5">5</button>
      </div>
    </div>
    <div class="item-row">
      <input class="resp" placeholder="Responsabile" />
      <input class="due" type="date" />
      <input class="note" placeholder="Note…" />
    </div>
    <div class="item-actions">
      <button class="del danger">Elimina voce</button>
    </div>
  </div>
</template>

<footer class="app-footer"><small id="appVersionFooter"></small></footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0/dist/chartjs-plugin-datalabels.min.js"></script>
<script src="app.js?v=tp3"></script>
<script>
document.addEventListener('DOMContentLoaded',()=>{
  const b=document.getElementById('btnLock');
  if(b) b.addEventListener('click', ()=> window.askSupervisor && window.askSupervisor());
  setTimeout(()=>{ if(window.setupSingleCH){ window.setupSingleCH('CH 2','Rettifica'); } }, 0);
});
</script>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  if (window.setupSingleCH) { window.setupSingleCH('CH 2','Rettifica'); }
});
</script>
</body>
</html>
