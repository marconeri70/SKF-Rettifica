<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Checklist 5S ‚Ä¢ CH 2 Rettifica</title>
<link rel="icon" href="assets/skf-192.png">
<link rel="stylesheet" href="style.css?v=tp3">
</head>
<body>
<header class="topbar">
  <div class="brand"><img src="assets/skf-192.png" alt="SKF"><span>SKF 5S</span></div><h2 style="margin-left:12px;font-size:1.1rem;font-weight:600">CH 2 ‚Äî Rettifica</h2>
  <div class="tools">
    <a class="btn ghost" href="./">‚Üê Indietro</a>
    <button id="btnLock" class="btn ghost" aria-label="Sblocca con PIN">üîí</button>
    <button id="btnTheme" class="btn ghost" aria-label="Cambia tema">üåì Tema</button>
  </div>
</header>

<main class="container">

<!-- hidden controls required by app.js to avoid early returns -->
<div style="display:none">
  <input id="q" />
  <select id="lineFilter"></select>
  <select id="sectorFilter"></select>
  <button id="btnAll"></button>
  <button id="btnAsm"></button>
</div>

  <section class="dashboard card">
    <div class="kpis">
      <div class="kpi"><div class="kpi-title">Punteggio medio</div><div id="kpiScore" class="kpi-value">0%</div></div>
      <div class="kpi"><div class="kpi-title">Azioni in ritardo</div><div id="kpiLate" class="kpi-value">0</div></div>
    </div>
    <div id="areas"></div>
  </section>

<dialog id="infoDlg"><form method="dialog" class="modal">
<button class="close" aria-label="Chiudi">‚úï</button>
<h3 id="infoTitle"></h3>
<p id="infoBody"></p>
</form></dialog>
</main>



<template id="tplArea">
  <article class="area card">
    <header class="area-hd">
      <input class="area-line" placeholder="CH n" />
      <div class="score">
        <span class="score-pill s1" data-s="1S"><b>1S</b> <span class="score-1S">0%</span></span>
        <span class="score-pill s2" data-s="2S"><b>2S</b> <span class="score-2S">0%</span></span>
        <span class="score-pill s3" data-s="3S"><b>3S</b> <span class="score-3S">0%</span></span>
        <span class="score-pill s4" data-s="4S"><b>4S</b> <span class="score-4S">0%</span></span>
        <span class="score-pill s5" data-s="5S"><b>5S</b> <span class="score-5S">0%</span></span>
      </div>
      <div class="sum">
        <span class="badge">Punteggio: <b class="score-val">0%</b></span>
        <span class="badge dom">Predominante: <b class="doms">‚Äî</b></span>
      </div>
      <div class="hd-actions">
        <button class="btn ghost collapse">Comprimi</button>
        <button class="btn danger delete-area">Elimina</button>
      </div>
    </header>

    <div class="panels">
      <section class="panel" data-s="1S">
        <h4 class="pill s1">1S ‚Äî Selezionare</h4>
        <p class="s-desc">Eliminare ci√≤ che non serve. Rimuovi tutto ci√≤ che √® inutile e crea un'area di lavoro essenziale, ordinata e sicura.</p>
        <div class="items"></div>
        <div class="panel-actions"><button class="btn add-item">+ Voce</button></div>
      </section>

      <section class="panel" data-s="2S">
        <h4 class="pill s2">2S ‚Äî Sistemare</h4>
        <p class="s-desc">Ogni cosa al suo posto. Organizza strumenti e materiali per trovarli e riporli facilmente.</p>
        <div class="items"></div>
        <div class="panel-actions"><button class="btn add-item">+ Voce</button></div>
      </section>

      <section class="panel" data-s="3S">
        <h4 class="pill s3">3S ‚Äî Splendere</h4>
        <p class="s-desc">Pulire √® ispezionare. Mantieni pulito e risolvi le cause dello sporco.</p>
        <div class="items"></div>
        <div class="panel-actions"><button class="btn add-item">+ Voce</button></div>
      </section>

      <section class="panel" data-s="4S">
        <h4 class="pill s4">4S ‚Äî Standardizzare</h4>
        <p class="s-desc">Regole e standard visivi chiari (etichette, colori) da seguire.</p>
        <div class="items"></div>
        <div class="panel-actions"><button class="btn add-item">+ Voce</button></div>
      </section>

      <section class="panel" data-s="5S">
        <h4 class="pill s5">5S ‚Äî Sostenere</h4>
        <p class="s-desc">Rendi le prime 4S un'abitudine e promuovi il miglioramento continuo.</p>
        <div class="items"></div>
        <div class="panel-actions"><button class="btn add-item">+ Voce</button></div>
      </section>
    </div>
  </article>
</template>



<template id="tplItem">
  <div class="item">
    <div class="item-hd">
      <input class="txt" placeholder="Titolo voce‚Ä¶" />
      <div class="points-dots">
        <button class="dot" data-val="0">0</button>
        <button class="dot" data-val="1">1</button>
        <button class="dot" data-val="3">3</button>
        <button class="dot" data-val="5">5</button>
      </div>
    </div>
    <div class="item-row">
      <input class="resp" placeholder="Responsabile" />
      <input class="due" type="date" />
      <input class="note" placeholder="Note‚Ä¶" />
    </div>
    <div class="item-actions"><button class="del danger">Elimina voce</button></div>
  </div>
</template>


<footer class="app-footer"><small id="appVersionFooter"></small></footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0/dist/chartjs-plugin-datalabels.min.js"></script>
<script src="app.js?v=tp3"></script>
<script>
document.addEventListener('DOMContentLoaded',()=>{
  const b=document.getElementById('btnLock');
  if(b) b.addEventListener('click', ()=> window.askSupervisor && window.askSupervisor());
  setTimeout(()=>{ if(window.setupSingleCH){ window.setupSingleCH('CH 2','Rettifica'); } }, 0);
});
</script>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  if (window.setupSingleCH) { window.setupSingleCH('CH 2','Rettifica'); }
});
</script>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  // 1) normal init
  try { if (window.setupSingleCH) window.setupSingleCH('CH 2','Rettifica'); } catch(e){}
  // 2) fallback: if nothing rendered, mount template directly so operator vede le 5S
  setTimeout(()=>{
    const areas = document.getElementById('areas');
    if (areas && areas.children.length===0) {
      const tpl = document.getElementById('tplArea');
      if (tpl && tpl.content) {
        areas.appendChild(tpl.content.cloneNode(true));
        const ln = areas.querySelector('.area-line'); if (ln) ln.value='CH 2';
      }
    }
  }, 120);
});
</script>

</body>
</html>
