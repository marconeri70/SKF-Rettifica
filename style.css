:root{
  --bg:#f5f7fb;
  --card:#ffffff;
  --text:#0b1324;
  --muted:#6b7a90;
  --outline:#d7dfeb;

  --blue:#0b66ff;
  --red:#ff3b57;
  --c1:#8b6ad8; /* 1S */
  --c2:#ff5a5f; /* 2S */
  --c3:#f2b731; /* 3S */
  --c4:#2dbE6d; /* 4S */
  --c5:#2f7ef6; /* 5S */
}

:root.dark{
  --bg:#0b1220;
  --card:#101a2e;
  --text:#e7eefc;
  --muted:#a7b6cf;
  --outline:#23324f;

  --blue:#3b82f6;
  --red:#ff5c74;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font:16px/1.45 system-ui,Segoe UI,Roboto,Arial;
  color:var(--text);background:var(--bg);
}

.topbar{
  position:sticky;top:0;z-index:10;
  display:flex;justify-content:space-between;gap:12px;
  align-items:center;padding:10px 14px;background:var(--card);
  box-shadow:0 1px 3px rgba(0,0,0,.1);
}
.brand{
  display:flex;align-items:center;font-size:1.2rem;font-weight:600;
  gap:8px;
}
.brand img{width:36px;height:36px;border-radius:6px;filter:grayscale(1)}
.tools{
  display:flex;gap:8px;align-items:center;flex-wrap:wrap;
}

main.container{
  max-width:1200px;margin:12px auto;padding:0 12px;
}
.intro{
  display:grid;grid-template-columns:1fr;gap:20px;
  align-items:start;
}
.intro .hero{width:100%;max-width:300px;justify-self:center;align-self:center}
.intro .bullets{list-style:none;padding-left:0;display:grid;gap:8px;line-height:1.2}
.intro .pill{display:inline-block;padding:2px 8px;font-weight:700;border-radius:4px;color:#fff}
@media (min-width:600px){.intro{grid-template-columns:1fr auto}}

.card{
  background:var(--card);border-radius:12px;
  padding:16px;box-shadow:0 2px 5px rgba(0,0,0,.05);
  border:1px solid var(--outline);margin-bottom:12px;
}
.filters .row{
  display:flex;gap:10px;flex-wrap:wrap;
  align-items:center;
}
#q{
  flex-grow:1;min-width:150px;
}
.seg{
  display:inline-flex;border-radius:8px;background:var(--bg);padding:2px;
  border:1px solid var(--outline);
}
.seg-btn{
  border:none;background:none;font:inherit;
  padding:6px 14px;border-radius:6px;cursor:pointer;
}
.seg-btn.active{background:var(--accent);color:var(--card)}
.seg-btn:not(.active):hover{background:var(--card)}
#sectorFilter.hide{display:none}

.btn{
  font:inherit;font-weight:600;padding:8px 14px;border-radius:8px;
  cursor:pointer;background:var(--accent);color:var(--card);border:1px solid var(--accent);
}
.btn:hover{filter:brightness(1.1)}
.btn.ghost{background:none;color:var(--accent);border-color:var(--accent);padding:8px}
.btn.ghost:hover{background:var(--accent-alt);color:var(--card);filter:none}
.btn.danger{background:var(--red);border-color:var(--red);color:#fff}
.btn.file{padding:8px 14px;font-weight:600}
.btn.file span{pointer-events:none}
input,select{
  font:inherit;padding:8px 12px;border-radius:8px;
  border:1px solid var(--outline);background:var(--panel);color:var(--text);
  -webkit-appearance:none;
}
input:focus,select:focus{border-color:var(--accent);outline:none}
select{background:var(--panel) url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="%236b7a90" d="M4.95 6.05a1 1 0 0 1 1.414 0L8 7.686l1.636-1.636a1 1 0 0 1 1.414 1.414l-2.343 2.343a1 1 0 0 1-1.414 0L4.95 7.464a1 1 0 0 1 0-1.414z"/></svg>') right 8px center no-repeat;padding-right:28px}
.chk{
  display:flex;align-items:center;gap:8px;cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}
.chk input{
  -webkit-appearance:none;width:20px;height:20px;
  background:var(--panel);border:1px solid var(--outline);
  border-radius:4px;position:relative;top:0;
}
.chk input:checked{background:var(--accent);border-color:var(--accent)}
.chk input:checked:after{content:'âœ“';position:absolute;top:-2px;left:3px;color:#fff}
.chk span{white-space:nowrap}

.kpis{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(100px,1fr));
  gap:12px;align-items:center;
}
.kpi{
  padding:12px 16px;background:var(--kpi-bg);border-radius:10px;
  display:flex;flex-direction:column;align-items:center;
  text-align:center;
}
.kpi-title{font-size:.9rem;opacity:.7}
.kpi-value{font-weight:700;font-size:1.5rem}

.chart-wrap{
  position:relative;
  display:flex;flex-direction:column;
  margin-top:20px;
}
.chart-scroll{
  width:100%;overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}
.chart-inner{
  position:relative;height:300px;
}
#chartAreas{height:100%!important;width:100%!important}

.lines{
  display:flex;flex-wrap:nowrap;overflow-x:auto;gap:8px;
  padding:10px 0;
}
.line-btn{
  flex-shrink:0;padding:6px 12px;border-radius:8px;border:1px solid var(--outline);
  background:var(--panel);color:var(--text);font:inherit;cursor:pointer;
}
.line-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}

.chips{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-top:10px;}
.chip{
  font-size:.8rem;padding:3px 8px;border-radius:4px;
  font-weight:700;color:#fff;
}
.s1{background:var(--c1)}
.s2{background:var(--c2)}
.s3{background:var(--c3)}
.s4{background:var(--c4)}
.s5{background:var(--c5)}

.late-list{
  margin-top:20px;
  background:var(--bg);border-radius:10px;padding:12px;
  border:1px solid var(--red);
  color:var(--red);
}
.late-list ul{
  list-style:none;padding:0;margin:0;
  display:grid;gap:8px;
}
.late-list a{
  color:inherit;text-decoration:none;
}
.late-list a:hover{text-decoration:underline}

.area.card{
  display:grid;gap:12px;
}
.area-hd{
  display:flex;flex-wrap:wrap;gap:8px;
  align-items:center;
}
.area-line{
  font-weight:600;font-size:1.2rem;
  padding:6px 10px;flex-grow:1;
}
.score{
  display:flex;flex-wrap:wrap;gap:6px;
  align-items:center;
}
.score-pill{
  font-size:.8rem;padding:2px 6px;border-radius:4px;
  border:1px solid transparent;cursor:pointer;
  transition:border-color .15s ease-in-out;
}
.score-pill:hover{border-color:var(--text)}
.score-pill b{text-transform:uppercase;color:#fff}
.score-pill span{color:#fff;font-weight:700}
.score-pill.has-score{opacity:1}
.score-pill.s1{background:var(--c1);border-color:var(--c1)}
.score-pill.s2{background:var(--c2);border-color:var(--c2)}
.score-pill.s3{background:var(--c3);border-color:var(--c3)}
.score-pill.s4{background:var(--c4);border-color:var(--c4)}
.score-pill.s5{background:var(--c5);border-color:var(--c5)}

.sum{
  display:flex;gap:8px;flex-grow:1;justify-content:flex-end;
}
.badge{
  font-size:.9rem;background:var(--bg);border-radius:6px;
  padding:4px 8px;border:1px solid var(--outline);
}
.hd-actions{display:flex;gap:8px;flex-wrap:nowrap;}
.hd-actions .btn{flex-shrink:0}

.area.collapsed .panels{display:none}
.area.collapsed .collapse{
  background:var(--accent);color:#fff;
  border-color:var(--accent);
}

.tabs{
  display:flex;gap:10px;
}
.tab{
  font:inherit;font-weight:600;padding:8px 14px;border-radius:8px;
  border:1px solid var(--outline);background:var(--panel);color:var(--text);
  cursor:pointer;
}
.tab.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.tab:not(.active):hover{background:var(--bg)}
.panels{display:grid;gap:16px;}
.panel .items{
  display:grid;gap:16px;margin-top:16px;
}
.item{
  border:1px solid var(--outline);border-radius:10px;
  padding:12px;background:var(--bg);
}
.item.late{border-color:var(--red)}
.item-hd{
  display:flex;flex-wrap:wrap;gap:8px;align-items:center;
}
.item-hd .info{font-weight:700;font-size:1rem;color:var(--muted);width:24px;height:24px;line-height:1;border-radius:50%;}
.item-hd .txt{flex-grow:1;}
.points-dots{display:flex;gap:4px;flex-shrink:0;align-items:center}
.dot{
  font-size:.8rem;width:24px;height:24px;border-radius:50%;
  border:1px solid var(--outline);background:var(--card);
  color:var(--muted);text-align:center;line-height:22px;
  cursor:pointer;
}
.dot.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.item-row{
  display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;
}
.item-row input{flex-grow:1}
.item-actions{
  display:flex;justify-content:flex-end;margin-top:8px;
}
.item-desc{
  font-size:.9em;line-height:1.4;margin:12px 0 0 0;
  color:var(--muted);
}
.item-desc b{font-weight:600}

.foot{
  text-align:center;padding:12px;font-size:.8rem;color:var(--muted);
}
#infoDlg::backdrop{background:rgba(0,0,0,.5);backdrop-filter:blur(3px)}
#infoDlg .modal{
  border-radius:12px;border:1px solid var(--outline);
  padding:20px;background:var(--card);
  max-width:400px;
}
#infoDlg .modal .close{
  position:absolute;top:10px;right:10px;
  width:24px;height:24px;border:none;background:none;
  cursor:pointer;font-size:1.5rem;color:var(--muted);
}
#infoDlg .modal h3{margin-top:0}
.panel[data-s="1S"] .item .info{color:var(--c1)}
.panel[data-s="2S"] .item .info{color:var(--c2)}
.panel[data-s="3S"] .item .info{color:var(--c3)}
.panel[data-s="4S"] .item .info{color:var(--c4)}
.panel[data-s="5S"] .item .info{color:var(--c5)}

@media (max-width: 600px) {
  .intro{
    grid-template-columns:1fr;
    text-align:center;
  }
  .intro .hero{
    order:-1;
  }
}
@media print{
  .topbar, .tools, .filters, .fold-all{display:none}
  .card{box-shadow:none;border:none}
}
