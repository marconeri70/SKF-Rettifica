<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SKF 5S</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" sizes="192x192" href="assets/skf-192.png" />
  <link rel="apple-touch-icon" href="assets/skf-192.png" />

  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#0b66ff" />
</head>
<body>
<header class="topbar">
  <div class="brand">
    <img src="assets/skf-192.png" alt="SKF" />
    <span>SKF 5S</span>
  </div>

  <div class="tools">
    <button id="btnNewArea" class="btn primary" aria-label="Crea nuova linea">+ Nuova linea</button>
    <button id="btnExport" class="btn" aria-label="Esporta dati">Esporta</button>
    <label class="btn file">
      <input id="fileImport" type="file" accept="application/json" hidden>
      <span>Importa</span>
    </label>
    <button id="btnPrint" class="btn" aria-label="Stampa">Stampa</button>
    <button id="btnTheme" class="btn ghost" aria-label="Cambia tema">ðŸŒ“ Tema</button>
  </div>
</header>

<main class="container">
  <section class="intro card">
    <img class="hero" src="assets/5s-hero.png" alt="5S hero">
    <div class="text">
      <h2>Cosa Ã¨ 5S</h2>
      <ul class="bullets">
        <li><span class="pill s1">1S Selezionare</span> â€” Avere solo ciÃ² che serve, eliminare il superfluo.</li>
        <li><span class="pill s2">2S Sistemare</span> â€” Un posto per tutto e tutto al suo posto.</li>
        <li><span class="pill s3">3S Splendere</span> â€” Pulire e rimuovere le cause dello sporco.</li>
        <li><span class="pill s4">4S Standardizzare</span> â€” Regole e segnali visivi chiari.</li>
        <li><span class="pill s5">5S Sostenere</span> â€” Disciplina, abitudine e miglioramento continuo.</li>
      </ul>
    </div>
  </section>

  <section class="filters card">
    <div class="row">
      <input id="q" placeholder="Cerca in descrizione / note / responsabileâ€¦" />
      <select id="lineFilter"></select>

      <div class="seg">
        <button id="btnAll" class="seg-btn active">Tutti</button>
        <button id="btnFgr" class="seg-btn">Rettifica</button>
        <button id="btnAsm" class="seg-btn">Montaggio</button>
        <select id="sectorFilter" class="hide"></select>
      </div>

      <label class="chk">
        <input id="onlyLate" type="checkbox" />
        <span>Solo in ritardo</span>
      </label>

      <button id="btnClearFilters" class="btn ghost">Pulisci</button>
    </div>
  </section>

  <section class="dashboard card">
    <div class="kpis">
      <div class="kpi"><div class="kpi-title">Linee</div><div id="kpiAreas" class="kpi-value">0</div></div>
      <div class="kpi"><div class="kpi-title">Punteggio medio</div><div id="kpiScore" class="kpi-value">0%</div></div>
      <div class="kpi"><div class="kpi-title">Azioni in ritardo</div><div id="kpiLate" class="kpi-value">0</div></div>

      <div class="zoom">
        <button id="zoomOut" class="mini" aria-label="Zoom meno">â€“</button>
        <button id="zoomIn" class="mini" aria-label="Zoom piÃ¹">+</button>
        <label class="chk stack">
          <input id="toggleStacked" type="checkbox">
          <span>Stacked</span>
        </label>
      </div>
    </div>

    <div class="chart-wrap">
      <div class="chart-scroll">
        <div class="chart-inner">
          <canvas id="chartAreas"></canvas>
        </div>
      </div>
      <div id="areasList" class="lines"></div>
    </div>

    <div class="legend chips">
      <span class="chip s1">1S</span>
      <span class="chip s2">2S</span>
      <span class="chip s3">3S</span>
      <span class="chip s4">4S</span>
      <span class="chip s5">5S</span>
    </div>

    <div id="lateList" class="late-list" style="display:none;"></div>

    <div class="fold-all">
      <button id="btnCollapseAll" class="btn ghost">Comprimi tutto</button>
      <button id="btnExpandAll" class="btn ghost">Espandi tutto</button>
    </div>
  </section>

  <section id="areas"></section>

</main>
<dialog id="infoDlg">
  <form method="dialog" class="modal">
    <button class="close" aria-label="Chiudi">âœ•</button>
    <h3 id="infoTitle"></h3>
    <p id="infoBody"></p>
  </form>
</dialog>

<footer class="app-footer"><small id="appVersionFooter"></small></footer>

<template id="tplArea">
  <article class="area card">
    <header class="area-hd">
      <input class="area-line" placeholder="CH n" />
      <div class="score">
        <span class="score-pill s1"><b>1S</b> <span class="score-1S">0%</span></span>
        <span class="score-pill s2"><b>2S</b> <span class="score-2S">0%</span></span>
        <span class="score-pill s3"><b>3S</b> <span class="score-3S">0%</span></span>
        <span class="score-pill s4"><b>4S</b> <span class="score-4S">0%</span></span>
        <span class="score-pill s5"><b>5S</b> <span class="score-5S">0%</span></span>
      </div>
      <div class="sum">
        <span class="badge">Punteggio: <b class="score-val">0%</b></span>
        <span class="badge dom">Predominante: <b class="doms">â€”</b></span>
      </div>
      <div class="hd-actions">
        <button class="btn ghost collapse">Comprimi</button>
        <button class="btn danger delete-area">Elimina</button>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab sec active" data-sector="Rettifica">Rettifica</button>
      <button class="tab sec" data-sector="Montaggio">Montaggio</button>
    </nav>

    <div class="panels">
      <section class="panel" data-s="1S">
        <h4 id="s-1">1S â€” Selezionare</h4>
        <p class="s-desc">Eliminare ciÃ² che non serve. Rimuovi tutto ciÃ² che Ã¨ inutile e crea un'area di lavoro essenziale, ordinata e sicura.</p>
        <div class="items"></div>
        <div class="panel-actions">
          <button class="btn add-item">+ Voce</button>
        </div>
      </section>

      <section class="panel" data-s="2S">
        <h4 id="s-2">2S â€” Sistemare</h4>
        <p class="s-desc">Ogni cosa al suo posto. Organizza gli strumenti e i materiali in modo che siano facili da trovare, usare e riporre.</p>
        <div class="items"></div>
        <div class="panel-actions">
          <button class="btn add-item">+ Voce</button>
        </div>
      </section>

      <section class="panel" data-s="3S">
        <h4 id="s-3">3S â€” Splendere</h4>
        <p class="s-desc">Pulire Ã¨ ispezionare. Mantieni pulito il posto di lavoro e, mentre lo pulisci, cerca e risolvi le cause dello sporco o dei problemi.</p>
        <div class="items"></div>
        <div class="panel-actions">
          <button class="btn add-item">+ Voce</button>
        </div>
      </section>

      <section class="panel" data-s="4S">
        <h4 id="s-4">4S â€” Standardizzare</h4>
        <p class="s-desc">Rendere l'ordine una routine. Stabilisci regole e standard visivi chiari (come etichette e colori) che tutti devono seguire.</p>
        <div class="items"></div>
        <div class="panel-actions">
          <button class="btn add-item">+ Voce</button>
        </div>
      </section>

      <section class="panel" data-s="5S">
        <h4 id="s-5">5S â€” Sostenere</h4>
        <p class="s-desc">Non smettere mai di migliorare. Rendi le prime 4S un'abitudine quotidiana per tutti e promuovi il miglioramento continuo.</p>
        <div class="items"></div>
        <div class="panel-actions">
          <button class="btn add-item">+ Voce</button>
        </div>
      </section>
    </div>
  </article>
</template>

<template id="tplItem">
  <div class="item">
    <div class="item-hd">
      <button class="info" aria-label="Dettagli voce" title="Dettagli">i</button>
      <input class="txt" placeholder="Titolo voceâ€¦" />
      <div class="points-dots">
        <button class="dot" data-val="0">0</button>
        <button class="dot" data-val="1">1</button>
        <button class="dot" data-val="3">3</button>
        <button class="dot" data-val="5">5</button>
      </div>
    </div>
    <div class="item-row">
      <input class="resp" placeholder="Responsabile" />
      <input class="due" type="date" />
      <input class="note" placeholder="Noteâ€¦" />
    </div>
    <div class="item-actions">
      <button class="del danger">Elimina voce</button>
    </div>
  </div>

  <div class="item-desc"></div>
</template>

<footer class="foot">
  <small>Â© SKF â€“ PWA offline</small>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0/dist/chartjs-plugin-datalabels.min.js"></script>
<script src="app.js"></script>
</body>
</html>
